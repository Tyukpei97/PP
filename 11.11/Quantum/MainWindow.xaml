<Window x:Class="Quantum.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Quantum"
        mc:Ignorable="d"
        Title="Quantum Computing Simulator" Height="700" Width="1000"
        Background="#1E1E1E" Foreground="White">
    <Window.Resources>
        <Style TargetType="GroupBox">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#404040"/>
            <Setter Property="Background" Value="#2D2D30"/>
        </Style>
        <Style TargetType="Button">
            <Setter Property="Background" Value="#007ACC"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#005499"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Margin" Value="2"/>
        </Style>
        <Style TargetType="ComboBox">
            <Setter Property="Background" Value="#3E3E42"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#007ACC"/>
        </Style>
        <Style TargetType="ProgressBar">
            <Setter Property="Foreground" Value="#007ACC"/>
            <Setter Property="Background" Value="#3E3E42"/>
            <Setter Property="Height" Value="20"/>
            <Setter Property="Margin" Value="0,0,0,5"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="350"/>
        </Grid.ColumnDefinitions>

        <!-- Основная визуализация -->
        <Grid Grid.Column="0" Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="200"/>
            </Grid.RowDefinitions>

            <!-- Сфера Блоха с анимацией -->
            <Border Grid.Row="0" BorderBrush="#404040" BorderThickness="1" Background="#252526">
                <Grid>
                    <Canvas x:Name="BlochSphereCanvas" Background="Transparent" 
                            MouseDown="Canvas_MouseDown" MouseMove="Canvas_MouseMove">
                        <!-- Анимированные элементы будут добавляться в коде -->
                    </Canvas>

                    <!-- Информация о состоянии -->
                    <Border Background="#80000000" Padding="10" VerticalAlignment="Top" HorizontalAlignment="Left" 
                            Margin="10" CornerRadius="5">
                        <StackPanel>
                            <TextBlock Text="Qubit State" FontWeight="Bold" FontSize="14"/>
                            <TextBlock x:Name="StateText" Text="|0⟩" FontSize="12"/>
                            <TextBlock x:Name="StateVectorText" Text="α = 1.000, β = 0.000" FontSize="12"/>
                        </StackPanel>
                    </Border>
                </Grid>
            </Border>

            <!-- Quantum Circuit Visualizer -->
            <Border Grid.Row="1" Margin="0,10,0,0" BorderBrush="#404040" BorderThickness="1" 
                    Background="#252526" CornerRadius="3">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <TextBlock Text="Quantum Circuit" FontWeight="Bold" Margin="10,5" 
                               Foreground="#007ACC" FontSize="14"/>

                    <ScrollViewer Grid.Row="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled">
                        <Canvas x:Name="CircuitCanvas" Height="150" Background="Transparent"/>
                    </ScrollViewer>
                </Grid>
            </Border>
        </Grid>

        <!-- Панель управления -->
        <ScrollViewer Grid.Column="1" Margin="10" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- Current Qubit Display -->
                <GroupBox Header="🎯 Current Qubit" Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="Selected Qubit:" FontWeight="Bold" Margin="0,0,0,5"/>
                        <ComboBox x:Name="QubitSelector" SelectionChanged="QubitSelector_SelectionChanged"
                                  ItemsSource="{Binding QubitIndices}" SelectedIndex="0" Margin="0,0,0,10"/>

                        <TextBlock Text="State Vector:" FontWeight="Bold" Margin="0,5"/>
                        <TextBlock x:Name="DetailedStateText" Text="|ψ⟩ = 1.000|0⟩ + 0.000|1⟩" 
                                   TextWrapping="Wrap" Margin="0,0,0,10" FontFamily="Consolas"/>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="|0⟩ Probability:" Margin="0,5"/>
                                <ProgressBar x:Name="Prob0Bar" Value="100"/>
                                <TextBlock x:Name="Prob0Text" Text="100%" HorizontalAlignment="Center"/>
                            </StackPanel>
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="|1⟩ Probability:" Margin="0,5"/>
                                <ProgressBar x:Name="Prob1Bar" Value="0"/>
                                <TextBlock x:Name="Prob1Text" Text="0%" HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </GroupBox>

                <!-- Quantum Gates with Icons -->
                <GroupBox Header="⚡ Quantum Gates" Margin="0,0,0,15">
                    <UniformGrid Columns="3">
                        <Button Content="🔄 X Gate" Click="XGate_Click" ToolTip="Pauli-X (Bit Flip)"/>
                        <Button Content="🌀 Y Gate" Click="YGate_Click" ToolTip="Pauli-Y"/>
                        <Button Content="💫 Z Gate" Click="ZGate_Click" ToolTip="Pauli-Z (Phase Flip)"/>
                        <Button Content="🌈 H Gate" Click="HGate_Click" ToolTip="Hadamard"/>
                        <Button Content="⚡ S Gate" Click="SGate_Click" ToolTip="Phase Gate"/>
                        <Button Content="🎯 T Gate" Click="TGate_Click" ToolTip="π/8 Gate"/>
                    </UniformGrid>
                </GroupBox>

                <!-- Qubit Operations -->
                <GroupBox Header="🎮 Qubit Operations" Margin="0,0,0,15">
                    <UniformGrid Columns="2">
                        <Button Content="🎯 Set to |0⟩" Click="ResetTo0_Click" Background="#107C10"/>
                        <Button Content="🎯 Set to |1⟩" Click="ResetTo1_Click" Background="#E81123"/>
                        <Button Content="📊 Measure" Click="MeasureQubit_Click" Background="#FFB900"/>
                        <Button Content="🔄 Random State" Click="RandomState_Click" Background="#744DA9"/>
                    </UniformGrid>
                </GroupBox>

                <!-- Multi-Qubit System -->
                <GroupBox Header="🌐 Multi-Qubit System" Margin="0,0,0,15">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <Button Content="➕ Add Qubit" Click="AddQubit_Click" Background="#107C10"/>
                            <Button Content="➖ Remove Qubit" Click="RemoveQubit_Click" Background="#E81123" Margin="5,0,0,0"/>
                        </StackPanel>
                        <TextBlock x:Name="QubitCountText" Text="🎲 Total Qubits: 1" Margin="0,5" FontWeight="Bold"/>
                        <Button Content="🔗 Apply CNOT" Click="CNOTGate_Click" Margin="0,5" Background="#744DA9"/>
                        <Button Content="🌀 Entangle Qubits" Click="EntangleQubits_Click" Margin="0,5" Background="#0099BC"/>
                    </StackPanel>
                </GroupBox>

                <!-- Quantum Algorithms -->
                <GroupBox Header="🚀 Quantum Algorithms" Margin="0,0,0,15">
                    <StackPanel>
                        <ComboBox x:Name="AlgorithmComboBox" SelectedIndex="0" Margin="0,5">
                            <ComboBoxItem Content="🎯 Deutsch-Jozsa Algorithm"/>
                            <ComboBoxItem Content="🔍 Grover's Search"/>
                            <ComboBoxItem Content="🔢 Quantum Fourier Transform"/>
                        </ComboBox>

                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <Button Content="▶ Run" Click="RunAlgorithm_Click" Background="#107C10"/>
                            <Button Content="⏸ Step" Click="StepAlgorithm_Click" Background="#007ACC" Margin="5,0,0,0"/>
                            <Button Content="⏹ Reset" Click="ResetAlgorithm_Click" Background="#E81123" Margin="5,0,0,0"/>
                        </StackPanel>

                        <Border Background="#323233" CornerRadius="3" Padding="10" Margin="0,5">
                            <TextBlock x:Name="AlgorithmResultText" TextWrapping="Wrap" Text="Select an algorithm and click Run..." 
                                       FontSize="11" TextAlignment="Center" Foreground="#CCCCCC"/>
                        </Border>
                    </StackPanel>
                </GroupBox>

                <!-- Animation Controls -->
                <GroupBox Header="🎬 Animation Controls" Margin="0,0,0,15">
                    <StackPanel>
                        <CheckBox x:Name="AnimationCheckBox" Content="Enable Animations" IsChecked="True" 
                                  Margin="0,5" Foreground="White"/>
                        <Slider x:Name="AnimationSpeedSlider" Minimum="0.1" Maximum="2.0" Value="1.0" 
                                Margin="0,5" TickFrequency="0.1" IsSnapToTickEnabled="True"/>
                        <TextBlock Text="Animation Speed" HorizontalAlignment="Center" FontSize="10"/>
                    </StackPanel>
                </GroupBox>

                <!-- System Information -->
                <GroupBox Header="📊 System Info">
                    <StackPanel>
                        <TextBlock x:Name="SystemInfoText" Text="System ready..." FontSize="10" TextWrapping="Wrap"/>
                        <ProgressBar x:Name="SystemLoadBar" Value="0" Height="10" Margin="0,5"/>
                    </StackPanel>
                </GroupBox>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Window>