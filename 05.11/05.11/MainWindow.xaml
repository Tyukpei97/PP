<Window x:Class="_05._11.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Эко-симулятор — Вариант для пары" Height="700" Width="1100">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="320"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- ПАНЕЛЬ ПАРАМЕТРОВ -->
        <StackPanel Grid.Column="0" Margin="8" >
            <TextBlock FontSize="18" FontWeight="Bold" Text="Параметры симуляции" Margin="0,0,0,6"/>
            <StackPanel Orientation="Horizontal" Margin="0,4">
                <Button x:Name="BtnStart" Content="Start" Width="70" Click="BtnStart_Click"/>
                <Button x:Name="BtnPause" Content="Pause" Width="70" Margin="6,0" Click="BtnPause_Click"/>
                <Button x:Name="BtnReset" Content="Reset" Width="70" Margin="6,0" Click="BtnReset_Click"/>
            </StackPanel>

            <Separator Margin="0,6"/>

            <TextBlock Text="Размер карты (px):" Margin="0,6,0,0"/>
            <StackPanel Orientation="Horizontal">
                <TextBox x:Name="TbMapWidth" Width="70" Text="800" Margin="0,0,6,0"/>
                <TextBox x:Name="TbMapHeight" Width="70" Text="600"/>
            </StackPanel>

            <TextBlock Text="Начальное число (раст/трав/хищ):" Margin="0,8,0,0"/>
            <StackPanel Orientation="Horizontal">
                <TextBox x:Name="TbInitPlants" Width="60" Text="150" />
                <TextBox x:Name="TbInitHerbivores" Width="60" Text="40" Margin="6,0"/>
                <TextBox x:Name="TbInitPredators" Width="60" Text="12" Margin="6,0"/>
            </StackPanel>

            <TextBlock Text="Скорость растений (рост/ход):" Margin="0,8,0,0"/>
            <Slider x:Name="SldrPlantGrowth" Minimum="0" Maximum="1" Value="0.25" TickFrequency="0.05" IsSnapToTickEnabled="False"/>

            <TextBlock Text="Скорость передвижения травоядных:" Margin="0,8,0,0"/>
            <Slider x:Name="SldrHerbSpeed" Minimum="5" Maximum="80" Value="30"/>

            <TextBlock Text="Скорость передвижения хищников:" Margin="0,8,0,0"/>
            <Slider x:Name="SldrPredSpeed" Minimum="5" Maximum="100" Value="45"/>

            <TextBlock Text="Шанс размножения (0..1):" Margin="0,8,0,0"/>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Herb:" VerticalAlignment="Center" Margin="0,0,6,0"/>
                <Slider x:Name="SldrHerbBreed" Minimum="0" Maximum="1" Value="0.02" Width="140"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
                <TextBlock Text="Pred:" VerticalAlignment="Center" Margin="0,0,6,0"/>
                <Slider x:Name="SldrPredBreed" Minimum="0" Maximum="1" Value="0.01" Width="140"/>
            </StackPanel>

            <Separator Margin="0,8"/>

            <TextBlock FontWeight="Bold" Text="Управление картой" Margin="0,6"/>
            <TextBlock Text="Колёсиком — масштаб, перетаскивание — пан." FontSize="12" Margin="0,6,0,0"/>

            <Separator Margin="0,8"/>
            <StackPanel Orientation="Horizontal">
                <Button x:Name="BtnSave" Content="Save" Width="70" Click="BtnSave_Click"/>
                <Button x:Name="BtnLoad" Content="Load" Width="70" Margin="6,0" Click="BtnLoad_Click"/>
            </StackPanel>

            <Separator Margin="0,8"/>

            <TextBlock FontSize="16" FontWeight="Bold" Text="Статистика" Margin="0,6"/>
            <StackPanel Orientation="Horizontal" Margin="0,6">
                <TextBlock Text="Растений:" Width="100"/>
                <TextBlock x:Name="TbCountPlants" Text="0"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Травоядных:" Width="100"/>
                <TextBlock x:Name="TbCountHerb" Text="0"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Хищников:" Width="100"/>
                <TextBlock x:Name="TbCountPred" Text="0"/>
            </StackPanel>

            <Separator Margin="0,8"/>

            <TextBlock FontSize="14" FontWeight="Bold" Text="Действия (клик на карте)" Margin="0,6"/>
            <TextBlock Text="ЛКМ — добавить растение, ПКМ — добавить травоядное, Shift+ПКМ — хищник" TextWrapping="Wrap" FontSize="12"/>

            <TextBlock Margin="0,10,0,0" FontSize="12" Foreground="Gray" Text="Простой учебный вариант. Код находится в code-behind (всё в одном файле)." TextWrapping="Wrap"/>
        </StackPanel>

        <!-- КАНВАС + МИНИ-ГРАФ -->
        <Grid Grid.Column="1" Background="#FFEEEEEE" Margin="6">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="160"/>
            </Grid.RowDefinitions>

            <!-- Панируемая/масштабируемая Canvas -->
            <Border BorderBrush="DarkGray" BorderThickness="1" Margin="8" ClipToBounds="True">
                <Grid>
                    <Canvas x:Name="WorldCanvas" Background="White"
                            Width="800" Height="600"
                            MouseWheel="WorldCanvas_MouseWheel"
                            MouseLeftButtonDown="WorldCanvas_MouseLeftButtonDown"
                            MouseRightButtonDown="WorldCanvas_MouseRightButtonDown"
                            MouseMove="WorldCanvas_MouseMove"
                            MouseLeftButtonUp="WorldCanvas_MouseLeftButtonUp"
                            >
                        <Canvas.RenderTransform>
                            <TransformGroup>
                                <ScaleTransform x:Name="Scale" ScaleX="1" ScaleY="1"/>
                                <TranslateTransform x:Name="Translate" X="0" Y="0"/>
                            </TransformGroup>
                        </Canvas.RenderTransform>
                    </Canvas>
                </Grid>
            </Border>

            <!-- Нижняя панель: мини-график популяций -->
            <Border Grid.Row="1" Margin="8" BorderBrush="Gray" BorderThickness="1" Padding="6" Background="White">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal" Grid.Row="0">
                        <TextBlock Text="История популяций (последние точки):" VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBlock Text="(зел — растения, жёлт — трав, красн — хищники)" FontSize="12" VerticalAlignment="Center"/>
                    </StackPanel>
                    <Canvas x:Name="GraphCanvas" Grid.Row="1" Height="110" Background="#FFF7F7F7"/>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>
